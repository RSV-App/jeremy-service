// curl -X PUT 'http://admin:password@localhost:5984/reviews-big/_design/byRestaurantID --data-binary @view.json

/// VIEW SCHEMA for "byRestaurantID"

function(doc) {
  var key, value;
  if (doc.restaurant_id && doc.text && doc.date && doc.overall && doc.food
    && doc.service && doc.ambience && doc.wouldrecommend && doc.tags
    && doc.restaurant_name && doc.restaurant_location && doc.restaurant_noise
    && doc.restaurant_recommendpercent && doc.restaurant_averageoverall
    && doc.restaurant_averageservice && doc.restaurant_averageambience
    && doc.restaurant_averagefood && doc.restaurant_valuerating && doc.diner_firstname
    && doc.diner_lastname && doc.diner_city && doc.diner_avatarcolor && doc.diner_isvip
    && doc.diner_totalreviews) {
    key = restaurant_id;
    value = {
      text: doc.text,
      date: doc.date,
      overall: doc.overall,
      food: doc.food,
      service: doc.service,
      ambience: doc.ambience,
      wouldrecommend: doc.wouldrecommend,
      tags: doc.tags,
      restaurant_name: doc.restaurant_name,
      restaurant_location: doc.restaurant_location,
      restaurant_noise: doc.restaurant_noise,
      restaurant_recommendpercent: doc.restaurant_recommendpercent,
      restaurant_averageoverall: doc.restaurant_averageoverall,
      restaurant_averageservice: doc.restaurant_averageservice,
      restaurant_averageambience: doc.restaurant_averageambience,
      restaurant_averagefood: doc.restaurant_averagefood,
      restaurant_valuerating: doc.restaurant_valuerating,
      diner_firstname: doc.diner_firstname,
      diner_lastname: doc.diner_lastname,
      diner_city: doc.diner_city,
      diner_avatarcolor: doc.diner_avatarcolor,
      diner_isvip: doc.diner_isvip,
      diner_totalreviews: doc.diner_totalreviews,
    };
    emit(key, value);
  }
}